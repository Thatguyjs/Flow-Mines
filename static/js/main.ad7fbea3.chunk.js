(this["webpackJsonpflow-mines"]=this["webpackJsonpflow-mines"]||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),s=n(22),r=n.n(s),o=n(14),c=n(4),l=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),s(e),r(e)}))},d=n(24),u=n(2),h=n(3),p=n(6),m=n(5),j=(n(29),n(30),n.p+"static/media/background_hd.5aa2853a.png"),b={zipCode:null,squareFootage:null,sprinklerFlow:null,minRainChance:.2,minRainAmt:1,tempThresh:null,daySkip:null,daySkipAuto:!0,displayFmt:"Narrow",notifAdvance:null,notifDevices:null,units:"Imperial",timeFormat:"12 Hour",textSize:"Normal",refreshPeriod:null,_read:function(){var e=localStorage.getItem("settings");return e?JSON.parse(e):{}},_write:function(e){localStorage.setItem("settings",JSON.stringify(e))},set:function(e,t){e in this&&(this[e]=t)},get:function(e){return this[e]},load:function(){var e=this._read();for(var t in e)this[t]=e[t]},saveAll:function(){var e={zipCode:null,squareFootage:null,sprinklerFlow:null,tempThresh:null,minRainAmt:null,minRainChance:null,daySkip:null,daySkipAuto:null,units:null,displayFmt:null,refreshPeriod:null,timeFormat:null,notifAdvance:null,textSize:null};for(var t in e)e[t]=this[t];this._write(e)}};b.load();var f=b,v=n(0),O=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={visible:!1},a}return Object(h.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{children:this.state.visible?Object(v.jsxs)("div",{className:"tooltip-content",children:[" ",this.props.info]}):null})}},{key:"show",value:function(){this.setState({visible:!0})}},{key:"hide",value:function(){this.setState({visible:!1})}}]),n}(i.a.Component),y=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).onMouseOver=function(e){null!=e.target&&a.tooltip.current.show()},a.onMouseOut=function(e){a.tooltip.current.hide()},a.state={id:e.id,text:e.text},a.tooltip=i.a.createRef(),a}return Object(h.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"tooltip-spawner",children:[Object(v.jsx)("button",{type:"tooltip-button",id:this.state.id,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,children:Object(v.jsx)("svg",{className:"buttonSVG",children:Object(v.jsx)("use",{href:"#info"})})}),Object(v.jsx)(O,{ref:this.tooltip,info:this.props.text})]})}}]),n}(i.a.Component),g=[],x=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).onMouseOver=function(e){null!=e.target&&a.tooltip.current.show()},a.onMouseOut=function(e){a.tooltip.current.hide()},a.tooltip=i.a.createRef(),a}return Object(h.a)(n,[{key:"dayName",value:function(){switch(this.props.layout){case"narrow":return this.props.data.dayName.substring(0,2);default:return this.props.data.dayName}}},{key:"getColor",value:function(){var e=this.props.data.temp,t=[0,0,0];return e>=80?(t[0]=190,t[1]=50-(e-80),t[2]=50-(e-80)):e>=50?(t[0]=6*(e-50),t[1]=145-5*(e-50),t[2]=190-8*(e-50)):t=[245,245,255,"25%"],"rainy"===this.props.data.weather&&(t[0]=30,t[1]=99,t[2]=190,t[3]="100%"),"rgb("+t+")"}},{key:"componentDidMount",value:function(){g.push(this)}},{key:"getFontSizes",value:function(e){var t={Small:.5,Normal:1,Large:1.5}[f.get("textSize")];return"wide"===e?["calc("+t+"*24px)","calc("+t+"*48px)"]:["calc("+t+"*1.4em)","calc("+t+"*1.4em)"]}},{key:"render",value:function(){var e=this.getFontSizes(this.props.layout);return Object(v.jsxs)("div",{className:"card card-".concat(this.props.layout),style:{background:this.getColor()},onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,children:[Object(v.jsx)(O,{ref:this.tooltip,info:this.props.data.explanation}),Object(v.jsx)("h2",{style:{fontSize:e[0]},children:this.dayName()}),Object(v.jsxs)("div",{className:"card-info",children:[Object(v.jsxs)("div",{className:"card-weather",style:{fontSize:e[1]},children:[Object(v.jsx)("div",{children:Object(v.jsx)("svg",{className:"largeIcon",children:Object(v.jsx)("use",{href:"#icon-weather-".concat(this.props.data.weather)})})}),"wide"===this.props.layout?Object(v.jsx)("div",{style:{flexGrow:"5"}}):"",Object(v.jsx)("div",{children:Object(v.jsx)("span",{children:this.props.data.gTempStr(f.get("units"))})})]}),Object(v.jsx)("div",{style:{flexGrow:"20"}}),Object(v.jsxs)("div",{style:{fontSize:e[0]},className:"card-schedule",children:[Object(v.jsx)("div",{children:Object(v.jsx)("svg",{className:"smallIcon",children:Object(v.jsx)("use",{href:"#icon-clock"})})}),Object(v.jsx)("div",{children:Object(v.jsx)("span",{children:this.props.data.gTimeStr(f.get("timeFormat"))})}),Object(v.jsx)("div",{children:Object(v.jsx)("svg",{className:"smallIcon",children:Object(v.jsx)("use",{href:"#icon-hourglass"})})}),Object(v.jsx)("div",{children:Object(v.jsx)("span",{children:this.props.data.duration})})]})]})]})}}]),n}(i.a.Component),w=n(12),k=n.n(w),C=n(16),N=n(33),S=n(34),F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;Object(u.a)(this,e),this.dayName=t,this.weather=n,this.temp=a,this.startTime=i,this.duration=s,this.explanation=r}return Object(h.a)(e,[{key:"gTempStr",value:function(e){if(!f.get("zipCode"))return"No Zip Code!";var t,n="f";return"Metric"===e?(t=Number((this.temp-32)/1.8).toFixed(0),n="c"):t=this.temp,t+"\xb0"+n.toUpperCase()}},{key:"setWeather",value:function(e,t,n){this.dayName=e,this.temp=t,this.weather=n}},{key:"setAdvice",value:function(e,t,n){this.startTime=e,this.duration=t,this.explanation=n}},{key:"gTimeStr",value:function(e){return"n/a"===this.startTime?this.startTime:"24 Hour"===e?S(this.startTime,["h:mm A"]).format("HH:mm"):this.startTime}}]),e}(),T={},_=[new F,new F,new F,new F,new F,new F,new F,new F],R="549d95480b954727bd5f2ff0a254e8b7";function I(e){return A.apply(this,arguments)}function A(){return(A=Object(C.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://api.weatherbit.io/v2.0/forecast/daily?postal_code=".concat(t,"&units=I&key=").concat(R),e.next=3,N(n);case 3:return a=e.sent,e.abrupt("return",new Promise((function(e,t){a.json().then((function(t){for(var n in t.data)T[n]=t.data[n];T.city=t.city_name,T.country=t.country_code,e(!0)})).catch((function(t){e(!1)}))})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=[];function M(){for(var e=0;e<8;e++)z[e]={day:e,high:T[e].max_temp,avg:T[e].temp,low:T[e].min_temp,inches:T[e].precip,wind:T[e].wind_spd,weather:(t=T[e].weather.code,200<=t&&t<=522||900===t?"rainy":700<=t&&t<=751||803<=t&&t<=804?"cloudy":800===t?"sunny":801<=t&&t<=802?"partly-cloudy":"none"),date:T[e].datetime};var t}var D="It will rain enough this week that you do not need to water your lawn.",H="The temperature will drop below freezing. You should blow out your sprinklers.",L="The temperature may be above ".concat(f.get("tempThresh")||90," degrees today. You should water your lawn for 5 minutes to cool it off."),B="This day is one of the three least windy days this week, so it is a good time to water your lawn.",E="Watering will already be done on other days this week.";function P(){return(P=Object(C.a)(k.a.mark((function e(){var t,n,a,i,s,r,o,c,l,d,u,h,p,m,j,b,v;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(f.zipCode);case 2:if(e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:for(t=f.get("squareFootage"),n=20,null!==f.get("sprinklerFlow")&&null!==t&&(n=1/f.get("sprinklerFlow")*t*(144/231)),a=f.get("tempThresh")||90,i=1,null!==f.get("minRainAmt")&&(i=f.get("minRainAmt")),M(),s=0;s<8;s++)r=z[s],o=r.date.split("-"),c=new Date(o[0],o[1]-1,o[2]),_[s].setWeather(c.toDateString().substring(0,3),r.avg,r.weather),_[s].setAdvice("n/a","0 min",E);if(l=i,!((d=z.reduce((function(e,t){return t.inches+e}),0))>=i)){e.next=19;break}for(u=0;u<8;u++)_[u].setAdvice("n/a","0 min",D);return W(),e.abrupt("return");case 19:for(l-=d,(h=[].concat(z)).sort((function(e,t){return e.wind<t.wind?-1:e.wind>t.wind?1:0})),p=h.slice(0,3),m=Number(l*n/3).toFixed(0)+" min",j=0;j<8;j++)z[j].low<=32&&_[j].setAdvice("n/a","0 min",H),z[j].high>=a&&_[j].setAdvice("6 am","5 min",L);for(b in p)v=p[b].day,_[v].setAdvice("6 am",m,B);W();case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){for(var e in _[0].dayName="Today",_)_[e].temp=Math.round(_[e].temp);for(var t in g)g[t].setState({})}(function(){return P.apply(this,arguments)})().catch((function(e){console.warn("Error getting advice:",e)}));var q=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).getWeekItems=function(e){var t=Object(d.a)(e);return t.shift(),t.map(a.makeItem)},a.makeItem=function(e){return Object(v.jsx)(x,{id:e.dayName,layout:a.layout,data:e})},a.layout=f.get("displayFmt").toLowerCase(),a}return Object(h.a)(n,[{key:"render",value:function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{id:"bg-wrapper",children:[Object(v.jsx)("img",{src:j,alt:"",style:{height:"max(100vh, 100vw)",objectFit:"fill"}}),Object(v.jsx)("div",{id:"bg-overlay"})]}),Object(v.jsxs)("header",{children:[Object(v.jsx)(o.b,{id:"nav-settings",to:"/settings",children:Object(v.jsx)("svg",{children:Object(v.jsx)("use",{href:"#icon-settings"})})}),Object(v.jsx)("h1",{children:"Flow"})]}),Object(v.jsx)("main",{children:Object(v.jsxs)("div",{id:"content-container",children:[Object(v.jsx)("div",{id:"today-container",children:Object(v.jsx)(x,{id:_[0].dayName,layout:"wide",data:_[0]})}),Object(v.jsx)("div",{className:"week-container week-container-"+this.layout,children:this.getWeekItems(_)})]})})]})}}]),n}(i.a.Component),Z=n(21),G=(n(44),n(8)),J=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).renderOption=function(e){return Object(v.jsx)("option",{value:e,children:e},e)},a.renderOptions=function(){return a.props.options.map(a.renderOption)},a.handleChange=function(e){a.setState({isDisplayed:a.state.isDisplayed,selected:e.target.value}),a.props.cHandle(Object(G.a)(a),e.target.value)},a.state={isDisplayed:!1,selected:a.props.selected},a}return Object(h.a)(n,[{key:"select",value:function(e){this.setState({isDisplayed:this.state.isDisplayed,selected:e}),this.renderOptions()}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"Dropdown",children:Object(v.jsxs)("label",{className:"settingsLabel",children:[this.props.label," ",Object(v.jsx)(y,{id:"tooltip-dropdown-"+this.props.name,text:this.props.desc}),Object(v.jsx)("br",{}),Object(v.jsx)("select",{name:this.props.name,onChange:this.handleChange,value:this.state.selected,children:this.renderOptions()})]})})}}]),n}(i.a.Component),U=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleClick=a.handleClick.bind(Object(G.a)(a)),a}return Object(h.a)(n,[{key:"handleClick",value:function(e){this.props.cHandle(e.target.value)}},{key:"render",value:function(){var e=this.props.selected===this.props.value;return Object(v.jsx)("div",{className:"RadioElement",children:Object(v.jsxs)("label",{className:"settingsLabel",children:[Object(v.jsx)("input",{type:"radio",name:this.props.panelName,value:this.props.value,checked:e,onChange:this.handleClick}),Object(v.jsx)("span",{children:this.props.value})]})})}}]),n}(i.a.Component),Y=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({selected:e}),a.props.cHandle(Object(G.a)(a),e)},a.createButton=function(e){return Object(v.jsx)(U,{cHandle:a.handleChange,selected:a.state.selected,value:e,panelName:a.props.panelName},e)},a.createRadioButtons=function(){return a.props.options.map(a.createButton)},a.state={selected:a.props.selected},a}return Object(h.a)(n,[{key:"render",value:function(){return Object(v.jsxs)("div",{className:"RadioContainer",children:[Object(v.jsx)("h3",{children:this.props.panelName})," ",Object(v.jsx)(y,{id:"tooltip-radio-"+this.props.name,text:this.props.desc}),this.createRadioButtons()]})}}]),n}(i.a.Component),V=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(G.a)(a)),a}return Object(h.a)(n,[{key:"handleChange",value:function(){this.props.cHandle(this)}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"ResetButton",children:Object(v.jsxs)("label",{className:"settings-label",children:["Settings Reset",Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"button",value:"RESET",onClick:this.handleChange})]})})}}]),n}(i.a.Component),K=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={isOn:a.props.isOn},a.handleClick=a.handleClick.bind(Object(G.a)(a)),a}return Object(h.a)(n,[{key:"handleClick",value:function(){var e=this;this.setState((function(t){return e.props.cHandle(e,!t.isOn),{isOn:!t.isOn}}))}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"CheckBox",children:Object(v.jsxs)("label",{className:"settingsLabel",children:[Object(v.jsx)("input",{type:"checkbox",value:this.props.isOn,checked:this.state.isOn,onChange:this.handleClick}),this.props.label," ",Object(v.jsx)(y,{id:"tooltip-toggle-"+this.props.name,text:this.props.desc})]})})}}]),n}(i.a.Component),Q=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({value:e.target.value}),a.props.cHandle(Object(G.a)(a),e.target.value)},a.state={value:a.props.value||"",placeholder:a.props.placeholder},a}return Object(h.a)(n,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"ValueField",children:Object(v.jsxs)("label",{className:"settingsLabel",children:[this.props.label," ",Object(v.jsx)(y,{id:"tooltip-value-"+this.props.name,text:this.props.desc}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{type:"number",onChange:this.handleChange,placeholder:this.props.placeholder,value:this.state.value})]})})}}]),n}(i.a.Component),X={"zip code":"zipCode","square footage":"squareFootage","flow rate":"sprinklerFlow","temp. threshold":"tempThresh","rain amt. threshold":"minRainAmt","rain chance threshold":"minRainChance","day skip":"daySkip",auto:"daySkipAuto",units:"units",display:"displayFmt","refresh period":"refreshPeriod","time format":"timeFormat","notification timing":"notifAdvance","font size":"textSize"},$={Zip:"Zip Code is used to find weather data for your area, to calculate watering information.",FR:"Flow rate of your sprinkler head in gallons per minute",TempThresh:"If the weather is this temperature or higher do not water on this day.",RainAmtThresh:"If rain exceeeds this amount (inches per week), no watering is required. Otherwise, rainfall is removed from the target amount of watering.",RainChanceThresh:"(Non-Functional) If rain chance is over this value, then the predicted amount of rain counts towards the rain amount threshold.",WindThresh:"(Non-Functional) If wind speed is over this amount, do not water on that day.",Units:"Sets DISPLAY units only. Settings are all in Imperial units.",Display:"Sets Display Type for week.",TimeFmt:"Sets Time format for display.",FontSize:"Changes font size of text on the main page.",NonFunctional:"Not Implemented Yet."},ee=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(e){var a;for(var i in Object(u.a)(this,n),(a=t.call(this,e)).components_top=[{type:Q,label:"Zip Code",desc:$.ZipDesc},{type:Q,label:"Flow Rate",desc:$.FR},{type:Q,label:"Temp. Threshold",desc:$.TempThresh},{type:Q,label:"Rain Amt. Threshold",desc:$.RainAmtThresh},{type:Q,label:"Rain Chance Threshold",desc:$.RainChanceThresh}],a.components_mid=[{type:Y,panelName:"Units",selected:"Imperial",options:["Imperial","Metric"],desc:$.Units},{type:Y,panelName:"Display",selected:"Narrow",options:["Wide","Narrow"],desc:$.Display},{type:Y,panelName:"Time Format",selected:"12 Hour",options:["12 Hour","24 Hour"],desc:$.TimeFmt}],a.components_bottom=[{type:J,label:"Font Size",selected:"Normal",options:["Small","Normal","Large"],desc:$.FontSize},{type:V}],a.components_top)a.components_top[i]=a._buildComponent(a.components_top[i]);for(var s in a.components_mid)a.components_mid[s]=a._buildComponent(a.components_mid[s]);for(var r in a.components_bottom)a.components_bottom[r]=a._buildComponent(a.components_bottom[r]);return a}return Object(h.a)(n,[{key:"_buildComponent",value:function(e){var t=e.type;delete e.type,t===Q&&(e.placeholder=e.label);var n=this._loadSettingFor(t,e);return null!==n?(e[n[0]]=n[1],e.key=n[2]):e.key="ResetButton",i.a.createElement(t,Object(Z.a)(Object(Z.a)({},e),{},{cHandle:this.update.bind(this)}))}},{key:"_loadSettingFor",value:function(e,t){var n=t.label||t.panelName;if(!n)return null;var a=f.get(X[n.toLowerCase()]);return e===Q?["value",a||"",n]:e===K?["isOn",a,n]:e===Y||e===J?["selected",a,n]:null}},{key:"update",value:function(e,t){if(e instanceof V)return localStorage.clear(),void window.location.reload();var n=e.props.label||e.props.panelName,a=X[n.toLowerCase()];f.set(a,t),f.saveAll()}},{key:"render",value:function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("header",{children:[Object(v.jsx)(o.b,{id:"nav-app",to:"/",onClick:function(){window.location.href="/Flow-Mines"},children:Object(v.jsx)("svg",{children:Object(v.jsx)("use",{href:"#icon-back"})})}),Object(v.jsx)("h1",{children:"Flow"})]}),Object(v.jsx)("main",{id:"main-settings",children:Object(v.jsxs)("div",{id:"settings-container",children:[Object(v.jsx)("h3",{id:"settings-label",children:"SETTINGS"}),Object(v.jsx)("div",{id:"settings-top",children:this.components_top}),Object(v.jsx)("div",{id:"settings-mid",children:this.components_mid}),Object(v.jsx)("div",{id:"settings-bottom",children:this.components_bottom})]})})]})}}]),n}(i.a.Component),te=n.p+"static/media/icons.a3486f1d.svg";Object(C.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(te);case 2:return t=e.sent,e.next=5,t.text();case 5:n=e.sent,document.getElementById("icon-container").innerHTML=n;case 7:case"end":return e.stop()}}),e)})))(),r.a.render(Object(v.jsxs)(i.a.StrictMode,{children:[Object(v.jsx)("div",{id:"icon-container"}),Object(v.jsx)(o.a,{basename:"/Flow-Mines",children:Object(v.jsxs)(c.c,{children:[Object(v.jsx)(c.a,{exact:!0,path:"/",component:q}),Object(v.jsx)(c.a,{path:"/settings",component:ee})]})})]}),document.getElementById("root")),l()}},[[45,1,2]]]);
//# sourceMappingURL=main.ad7fbea3.chunk.js.map